extends ../layouts/default.pug

block content
  main.main-page
    h1.visually-hidden –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–∏—á–Ω–æ–≥–æ –±–ª–æ–≥–∞ –¢–∏–ø–æ—Ç–µ–∫–∞
    p
      | –≠—Ç–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü –±–ª–æ–≥–∞ –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å, —á—Ç–æ–±—ã –æ–ø–∏—Å–∞—Ç—å —Å–µ–±—è üëè

    if !articles.length
      .main-page__empty-wrapper
        p.main-page__empty-text –ó–¥–µ—Å—å –ø–æ–∫–∞ –ø—É—Å—Ç–æ!

    else
      include ../components/categories.pug

      .main-page__section-flex(class=(!lastComments.length) ? 'main-page__section-flex--short': '').hide-on-update
        section.main-page__hot.hot
          h2.hot__name
            | –°–∞–º–æ–µ –æ–±—Å—É–∂–¥–∞–µ–º–æ–µ
            span.hot__icon.hot__icon--fire
          ul.hot__list
            each article in mostDiscussedArticles
              li.hot__list-item
                a.hot__list-link(href=`/articles/${article.id}`)
                  | #{(article.announce.length < 100) ? article.announce : (article.announce.slice(0,100) + `...`)}
                  sup.hot__link-sup #{article.commentsCount}
            else
              p.hot__empty –ó–¥–µ—Å—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç...

        section.main-page__last.last
          h2.last__name
            | –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
            span.last__icon.last__icon--cloud
          ul.last__list
            each comment in lastComments
              li.last__list-item
                img.last__list-image(src=`/img/${comment.users.avatar ? comment.users.avatar : 'icons/smile.svg'}` width='20' height='20' alt='–ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è')
                b.last__list-name
                  | #{comment.users.firstName + ' ' + comment.users.lastName}
                a.last__list-link(href=`/articles/${comment[`article_id`]}`)
                  | #{(comment.text.length < 100) ? comment.text : (comment.text.slice(0,100) + `...`)}
            else
              p.last__empty –ó–¥–µ—Å—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç...
      .vue-section

      section.main-page__list.preview
        include ../components/articles-preview

      if totalPages > 1
       +pagination

  script(src=`/js/socket-io.min.js`)
  script(src=`/js/vue.min.js`)
  script(src=`/js/data-updater.js`)
