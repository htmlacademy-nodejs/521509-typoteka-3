extends ../layouts/default.pug

block content
  main.main-page
    h1.visually-hidden Ð“Ð»Ð°Ð²Ð½Ð°Ñ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð»Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ Ð±Ð»Ð¾Ð³Ð° Ð¢Ð¸Ð¿Ð¾Ñ‚ÐµÐºÐ°
    p
      | Ð­Ñ‚Ð¾ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð²Ð»Ð°Ð´ÐµÐ»ÐµÑ† Ð±Ð»Ð¾Ð³Ð° Ð¼Ð¾Ð¶ÐµÑ‚ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÑÐµÐ±Ñ ðŸ‘

    if !articles.length
      .main-page__empty-wrapper
        p.main-page__empty-text Ð—Ð´ÐµÑÑŒ Ð¿Ð¾ÐºÐ° Ð¿ÑƒÑÑ‚Ð¾!

    else
      include ../components/categories.pug

      .main-page__section-flex(class=(!lastComments.length) ? 'main-page__section-flex--short': '').hide-on-update
        section.main-page__hot.hot
          h2.hot__name
            | Ð¡Ð°Ð¼Ð¾Ðµ Ð¾Ð±ÑÑƒÐ¶Ð´Ð°ÐµÐ¼Ð¾Ðµ
            span.hot__icon.hot__icon--fire
          ul.hot__list
            each article in mostDiscussedArticles
              li.hot__list-item
                a.hot__list-link(href=`/articles/${article.id}`)
                  + cutText(article.announce)
                  sup.hot__link-sup #{article.commentsCount}
            else
              p.hot__empty Ð—Ð´ÐµÑÑŒ Ð¿Ð¾ÐºÐ° Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½ÐµÑ‚&hellip;

        section.main-page__last.last
          h2.last__name
            | ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸
            span.last__icon.last__icon--cloud
          ul.last__list
            each comment in lastComments
              li.last__list-item
                img.last__list-image(src=`/img/${comment.users.avatar ? comment.users.avatar : 'icons/smile.svg'}` width='20' height='20' alt='ÐÐ²Ð°Ñ‚Ð°Ñ€ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ' style="width: 20px;height: 20px; object-fit: cover; border-radius: 50%;")
                b.last__list-name
                  | #{comment.users.firstName + ' ' + comment.users.lastName}
                a.last__list-link(href=`/articles/${comment[`article_id`]}`)
                  + cutText(comment.text)
            else
              p.last__empty Ð—Ð´ÐµÑÑŒ Ð¿Ð¾ÐºÐ° Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½ÐµÑ‚&hellip;
      .vue-section

      section.main-page__list.preview
        include ../components/articles-preview

      if totalPages > 1
       +pagination

  script(src=`/js/socket-io.min.js`)
  script(src=`/js/vue.min.js`)
  script(src=`/js/data-updater.js`)
